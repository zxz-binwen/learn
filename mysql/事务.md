# Spring的4种事务特性，五种隔离级别，7种传播行为

## Spring事务
什么是事务：事务是一组逻辑上的操作，组成这组操作的各个逻辑单元，要么一起成功，要么一起失败


## 事务特性（ACID）
* 原子性（Atomicity）：要么全部执行成功，要么全部不执行。强调事务的不可分割性。
* 一致性（Consistency）：事务执行的前后数据的完整性保持一致。
* 隔离型（Isolation）：在并发环境中，一个事务的执行过程中，不应该受到其他事务的干扰
* 持久性（Durbility）：事务一旦结束，数据将被持久化到数据库.

## 如不考虑隔离性会引发的安全问题
* 脏读：一个事务读到了另一个事务未提交的事务
* 不可重复读：一个事务读到了另一个事务已经提交的update的数据导致多次查询的结果不一致
* 虚幻读：一个事务读到了另一个事务已经提交的insert的数据导致多次查询结果不一致

## 解决读的问题：设置事务隔离级别（五种）
* DEFAULT：这是一个PlatfromTransactionManager默认的隔离级别，使用数据库默认的隔离级别（mysql：可重复读，oracle：读已提交）
* 未提交读（read uncommitted）：脏读，不可重复读，幻读都可能发生。是最低的事务隔离级别，它允许另一个事务可以看到本事务为提交的数据。
* 已提交读（read committed）：避免脏读，但不可重复读，幻读有可能发生。保证一个事务提交后才会被另一个事务读取，另一个事务不能读取本事务未提交的数据。
* 可重复读（repeatable read）：避免脏读，不可重复读，但幻读有可能发生。它除了保证一个事务提交后才能被另一个事务看到外还避免了不可重复读。
* 串行化（seializable）：可避免脏读，不可重复读和幻读。事务串行化执行。

## 事务传播行为
* required：支持事务，若事务不存在则创建一个新的事务。也是spring默认的事务隔离级别
* supports：支持事务，若事务不存在则已非事务执行
* mandatory：支持事务，若事务不存在，则抛出异常
* requires_new:  如果有事务存在，挂起当前事务，创建一个新的事务
* not_supported: 以非事务方式运行，如果有事务存在，挂起当前事务
* never: 以非事务方式运行，如果有事务存在，抛出异常
* nested: 如果当前事务存在，则嵌套事务执行
